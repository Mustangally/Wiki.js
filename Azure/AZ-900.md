---
title: AZ-900 Notes
description: Text wall for AZ-900 Studying
published: true
date: 2022-05-07T21:08:59.654Z
tags: azure, certification, notes
editor: markdown
dateCreated: 2022-05-06T21:46:01.338Z
---

# Benefits of Cloud Computing

- Pay for What You Use
- Cloud Providers have a greater capacity and ability to offer services than you would likely have on-prem.
- Multiple options for connectivity (internet, VPN, ExpressRoute, MPLS, etc.)
- Cloud provider manages the hardware and base level OS's (updates, upgrade, replacements, etc.)
- Agility
    - Can scale and change your infrastructure dynamically, without an upfront cost.
- Regionality
    - Can deploy resources closer to your customer using Regions in Azure
- HA
    - Can make your infrastructure very durable by spreading amongst buildings, servers, and racks.
- Disaster Recovery
    - Replications between regions allows for resiliency in the event of a full region failure.
- Scalability
    - Can dynamically scale resources during requirement peaks and valleys

# CapEx, OpEx, Consumption Based

- Capital Expenditure is the concept of buying hardware or software ahead of time. It's the "up-front" cost.
- Operational Expenditure is the concept of paying for things as you use it, not ahead of time. This is what the cloud model offers.
- Consumption Based model allows you to respond to demand without an upfront cost, which can help with situations that are inconsistent or unstable.

# Cloud Service Categories

Each of the below are different layers of shared responsibility.

- IaaS - Infrastructure as a Service
    - Cloud provider provides the hardware and the base hypervisor level services like base OS, Storage, and networking. Anything else (VMs, etc.) is on the customer.
    - The downside here is the customer has to worry about VM patching, backups, security, etc.
- PaaS - Platform as a Service
    - Here, the cloud provider takes more responsibility. They are now handling the VM's and runtimes that are running your services. Now you're only worried about your own applications that you're running on their platform.
    - Customers have services available to them like AKS, App Services, etc. to run their application without being concerned with the underlying infrastructure.
- Serverless Computing still somewhat falls under the PaaS umbrella, but rather than your application running on some underlying VM or container, Serverless computing does not have that underlying dependency. These are event triggered, and you only pay for the exact amount of work done.
    - Azure Functions
    - Azure Logic Apps
- SaaS - Software as a Service
    - This is a full product offering. Something like O365 is a SaaS offering from Microsoft. Many companies that deploy their application in the cloud, present their application as a Saas to their own customer.

# Types of Cloud Computing

There are 3 different types of Cloud computing, and they have to do with where the resources are actually located.
We have Private Cloud, Hybrid Cloud, and Public Cloud.

- Public Cloud - Things like Azure or AWS
    - More or less Limitless
    - multi-region
    - many different services
    - greatest pool of resources
- Private Cloud
    - Essentially a cloud service hosted by your own company
    - company owns the hardware
- Hybrid Cloud
    - This is a mixture of the two above
    - Allows utilization of your own hardware as well as public resources
        - agility and scalability out of your own resource pool
    - May need close proximity latency provided by private cloud, but the full resource pool of public

# Regions & Region Pairs

### Azure Environments

While most companies are going to utilize the "commercial" Azure environment, There are a couple other environments that are logically and physically separate within the Azure global system.

These environments are:

- AzureUSGovernment
- AzureGermanCloud
- AzureCloud
- AzureChinaCloud

These separate environments are mostly due to varying restrictions and compliance regulations set in certain countries or organizations.

Within these environments, there are many "regions". These are directly linked to physical location.

### Regions

A region is essentially defined as a "latency envelope". Azure tolerates a 2ms round-trip latency between any 2 datacenters in a "region". This will essentially mean that all of the datacenters in a "region" are relatively close together and connected by private connections.

Regions allow you to localize services to the end consumer so that they aren't having to access services potentially on the other side of the globe. You can also use these to comply with regulations and policies like data sovereignty.

You may also want to run services in multiple regions to be able to withstand natural disasters or other causes of downtime in a given region. This can provide a very reliable HA setup.

### Region Pair

Microsoft has designated something called "region pairs" that cannot be changed by the customer. What these do is to automatically provide a level of resiliency for your data and services by replicating them to another region.

You may notice in the pairing table found online, the pairs never leave any geo-political boundaries. This ensures that level of regulation compliance we spoke of before.

Microsoft also uses these pairs as a blueprint for rolling updates, and rolling starts in the event of a major region outage. It will prioritize one region in a pair to bring online, or update, then move the the second. This ensures that service is not interrupted for the customer.

# Availability Zones

Within a Region, you will likely see multiple physical datacenters. Microsoft will group these datacenters into "Availability Zones". What this means is that each zone has it's own separate utility grid (power, cooling, networking) so that a problem with one datacenter (or zone) does not effect another. This provides great resiliency to a region.

Most major Regions in Azure will have 3 distinct availability zones, and you can select them during resource creation in Azure. Note that between subscriptions, Availability zones are not identical (buildings could be different). They will still be the same in concept, but the architecture could be different.

You can set certain resources to be "zonal", so it may automatically set it's own availability zone and this cannot be changed. They will be marked by default as "Zone-Redundant", meaning it is replicated across the AZ's

# Resource Groups

1 level below a subscription, a resource group is a "group" that any service or resource created in Azure must live in. It is essentially an organization tool to group different resources together however you see fit. These can mix regions as well as resource types. Note however that Resource Groups cannot be nested. You can however move resources between groups. You can still connect resources between groups, so they are not necessarily locked into communicated only within their own group.

A common configuration would be to group resource types, or resources grouped by purpose, product, or deployment. Often times resources in a group will share a lifecycle. This means they are built, live, and die together.

Another use case would be to confine a user or policy to a certain resource group. This allows you to manage users and resource creation/management more easily.

You can label your resource groups with metadata in the form of Tags, which are key:value pairs that assign different labels and properties to a group. You can point policies and other rules within Azure to any group with a given Tag. This further allows you to manage resources and permissions across the Azure infrastructure.

# Subscriptions

A subscription is an "agreement" between the customer and Microsoft. You can have multiple subscriptions per account, but they act as a Billing Boundary or Security boundary.

### Azure AD

It is important to understand that any organization will have an Azure AD tenant that has Users and Groups. Any Azure subscription will trust 1 and only 1 Azure AD tenant. This allows you to grant users permissions to different resources however you see fit.

### Access Control

Within a subscription, you can grant RBAC permissions to different users or Groups. You can also apply policies and budgets as you see fit. These will be inherited down to any resource group or resource within the subscription.

### Limits

Every subscription has a set of soft and hard limits as far as objects and resources allowed per subscription. While these limits are very large, they do exist.

### Environments

One use case you may see would be things like dev/test and prod environments split into seperate subscriptions. This can allow you to set different budgets or restrictions based on the environment.

# Management Groups

These groups essentially define access control for Subscriptions. These can be nested to 6 levels, so that you can create tiered access rights. They technically live between subscriptions and Azure AD, and allow you to grant permissions to different subscriptions to different people. Think of them similar to security groups for subscriptions.

# Resource Manager - ARM

At a very basic level, ARM allows you to use IaaC files to define and deploy resources into your environment. Azure actually gives you a large library of ARM Templates to start with so you don't necessarily have to start from scratch.

These IaaC files/templates are stored in Azure in the JSON format.

This allows for largely scalable resource management and deployment. You can manage everything in a code file rather than having to click through the portal.

# Azure ARC

Arc is the idea of expanding Azure to other systems to maintain all of the benefits of Azure, and utilize the resources of other systems (on-prem or other cloud providers)

Not only can you use this to deploy and manage things on different systems, but you can do things like Arc-Enabled k8s, and span a k8s cluster across different cloud providers. You can also have things like Data Services (DBs), AppServices, Machine Learning, etc.

# Resource Reqs for VMs

- At a minimum you will need an Operating system and a disk. This typically makes an "OS Managed Disk". You can have an ephemeral disk for some cases, but these are specialized and used for things like AKS.
- Optionally, we can add more disks for data.
- Networking
    - vNIC
    - vNET/SubNet
    - PublicIP
    - Network Security Group

Note that you can use resource groups to keep all of the components of a VM grouped together for organization sake.

# Core Compute Resources

## IaaS Options

When creating a VM, there are many different types of VM Templates you can select.
These are also all grouped into different categories:

- General Purpose
- Compute Optimized
- Memory Optimized
- Storage Optimized

VM's are great when the customer needs management and direct access to the OS of the machine they're utilizing. Unlike many PaaS services, you have far more control over the fine details.

### VM Scale Sets

These are built on-top of VM's. You would first build a Template and Configuration, then you set a scale (min, max, auto settings). What this does is automatically scale VM deployments based on requirements.

This is different than Azure Batch, which will batch create a set of VMs that are identical.

## PaaS Options

With PaaS options you have less to worry about as you don't need to manage the base OS for your machines. This means you can scale and deploy significantly faster, and have less underlying management requirement on your end.

These are things like AKS, ACI, App Services, etc. Essentially you can deploy all of your applications in containers that live within a VM and container Runtime, but you don't need to worry about the VM or Runtime with PaaS Offerings.

## Serverless

With serverless computing, you only have to pay for exactly what you're using. This does however have the lowest level of direct management.

Function Apps and Logic Apps are simple processes that run and then terminate, so you only pay to the millisecond of compute you use.

- Function apps are built on code and allow you to run scripts and other basic code.
- Logic Apps are graphically designed processes that run a task based on a trigger or condition.

## Azure Virtual Desktop

Essentially an Azure hosted VDI. Azure will manage the broker, Hosts, networking, etc that makes all of this run. You can simply deploy a VD that people can connect to in whichever way you configure.

# Core Network Resources

## Virtual Network

This is a deployable network that is confined to a single subscription, and a single region. You cannot span regions/subscriptions. You can connect different regions or subscriptions, but you'd have to create more networks to connect.

Each network is defined by an IPv4 CIDR Range. You'll typically use RFC1918, which defines the ranges that stay internal to the network (think LAN) and are not routable over the public internet. (10/8, 172.16/12, 192.168/16) You can also optionally utilize IPv6

Once you have your vNet created, you'll typically divide it into different Subnets. You'll then group your resources in different subnets. Think of this the same way you'd create an on-prem network. Note that in Azure, you'll always lose 5 IP's to utility functions within the subnet. This means you'll have 251 assignable IP's in a /24 subnet.

To make a service in your environment publicly accessible, you'll need a "Public IP Resource" and attach that to either a VM directly, or to a Load Balancer that interfaces with your network.

As stated before, you can connect two different networks. First, you do need to make sure you don't have any IP conflicts in the different networks. This can be difficult, but it is essential to making networks work together. Then you'll use Peering to connect the different networks together. This can be on-prem networks, or it can be other Regions in Azure.

### Connection Types

- Policy
- Route Based
    - Site-to-Site
    - Point-to-Site
    - VPN
- ExpressRoute
    - This allows for the option to not connect via the public internet. You can have a private connection run from your facility to a "meet me" location for MS, and this allows a private connection to Azure. You can also use something like MPLS to connect.

# Public & Private Endpoints

For many different services in Azure, you will have a "public endpoint" which makes the service accessible from the internet. It is routable on the internet. That doesn't mean it's actually accessible, as you most times still need to authenticate to the service.
You can also configure a firewall infront of the endpoint to restrict who can access it.

Often times for storage, you can also make a private endpoint for the storage resource, and only allow traffic from a certain set of resources within your private vnet. This is called a service endpoint.

### Private Endpoint

You can optionally disable public access, and only allow connection on a "private endpoint". This means you can restrict access to the resource only from the Azure networks you define and allow. This can still be peered networks, but they need to be defined in the private endpoint.

# Storage Accounts

A storage account is what defines the parameters of your storage. This can be things like Region, performance (std vs prem), redundancy.

### Type

- standard
    - generally will be GPv2
- Premium - low latency, No GRS
    - You will need to choose your storage type (block blob, files, etc.)

### Redundancy

- LRS - Local Region only, still has 3 copies on location
- ZRS - This is still in 1 region, but now it is spread between availability zones.
- GRS - 3 Copies in primary region (3 AZ), 3 copies in the region pair (1 AZ)

### Services

- Blob
    - Block - general unstructured data, lives in a "container"
        - Hot Tier
        - Cool Tier
        - Archive Tier
    - Page - this is page files
        - This is used by disks (in VMs)
    - Append - log files and such
- Files
    - SMB/NFS Shares
        - Azure File Sync
            - Tiering based on Access Time
- Queues
    - First in First Out data store
- Table
    - Key-Value Pairs

# Database Resources

Most of these are PaaS offerings in Azure

## SQL Based Offerings

- SQL Server - Relational Database
    - Fixed Schema
    - Records & Properties & a key
    - Azure SQL DB
    - Azure SQL MI (managed instance)
        - different in features from DB
        - Runs in your vnet

## Open Source Offerings

There are Managed Database offerings for:

- MySQL
- PostgreSQL
    - Citus: Muli-server, sharding data
        - Azure Hyperscale
- MariaDB

## Azure Specific

## Cosmos DB

- Multi Model
    - Documents
        - SQL
        - MongoDB
    - Columns
        - CassandraDB
    - Table
        - ETCD
    - Graph
        - Gremlin
- Multi Consistency
    - Allows write to multiple regions, and cosmos will sync the databases as needed

# Azure Marketplace

Essentially a catalog of different templates that you can deploy to quickly spin up a service.

You can also setup a private marketplace to control the options in the marketplace.

# IoT Services

This is a control plane for IoT devices that are in some way connected to Azure. Azure will receieve telemetry and metric from the device, and it can also send down commands and even updates to the device.

We need to be able to read sensors, as well as identify and authenticate the devices into the ecosystem.

## IoT Hub

This is where device-to-cloud data are received. This could be metrics and telemetry, files, etc. But it also allows for commands or data sent down from Cloud-to-device.

Hub also creates a "Device Twin" for each IoT device. It is a virtual twin of the device in question so that IoT Hub can use this intermediary for things like caching commands and metrics.

## IoT Central

This service utilizes IoT Hub (which could be seen as PaaS) to present a SaaS like solution. It presents the user with things like dashboards, device templates, simulated devices, etc. You can somewhat see it is a frontend to Hub.
You can also configure rules and triggers to perform actions like send emails, call functions or logic apps, or send tickets.

Central gives you the ability to very quickly configure and deploy IoT devices in your environment without having to develop your own code or program.

## Azure Sphere

Sphere provides an end-to-end security solution for your IoT devices. As we know, IoT devices are not known to be the most secure devices, so this solution helps with that problem. Many IoT devices ship with a Azure Sphere module that helps with security and can link to Sphere in your cloud environment.

Identity and Authentication is all certificate based, so all communication can be verified and encrypted in transit.

# Big Data & Analytics Services

## Azure Data Factory

When talking about big data processes, traditionally we would be doing an "ETL" (Extract, Transform, Load) process to utilize the data. Now however, there is one additional step.

Upon receiving or extracting data, we can store it in its raw form in "Data Lake" which sits on Blob storage. Once it is here, we can take it and transform a copy. We can clean out data we don't want at the time, and transform it into a format that is usable and readable. Once we've done that, we can load it into different service like SQL or CosmosDB.

Obviously for this whole process we need some kind of orchestration tool. That's where Azure Data Factory comes in.

### HDInsight

HDInsight is responsible for the "Transform" component of the previously discussed process. It allows for a large variety of data processing templates.

There are things like Hadoop, Storm, Spark, etc.

- Hadoop is a disk based data transformation tool
- Spark is for high performance data transformation. You can schedule jobs to run on a dataset
- Kafka: Data stream ingest and management
- Hive: Can handle live data as it comes in

### Databricks

This solution is built on Apache Spark. Databricks is a managed solution used to perform data management.

## Azure Synapse Analytics

Synapse can provide an overarching workspace to manage all of the aforementioned services related to big data and analytics.

# AI Services

AI is often used to analyze data or trying to create predictions based on data coming in. It can build models based on historical data and use that to predict what may happen moving forward.

## Azure Machine Learning

This is a platform used for predictions. You can use this for data scientists who want total control over what is going on with creating and using models. You can define how data is gathered, how to train a model, evaluate and change models, and run experiments on the model. Once this is done, you can deploy the algorithm as an API that is accessible by an application endpoint.

## Azure Cognitive Services

Pre-built models that can be quickly and easily deployed. This has minimal requirements as far as data science knowledge.

These can do things like:

- Language analysis
- Speech to text or translation
- Vision for recognition and identification
- Decisions or recommendations for different purposes.

## Azure Bot Service

- Chat interaction with a person
    - virtual agents (text or speech)
- Has to have understanding of what is being asked.
    - tied to a knowledge base that the bot can draw from

# Serverless Technologies

Any work done in Serverless services are billed on a consumption basis. So you're not paying for unused capacity.

They are also all event driven, so something has to happen to trigger the function. This could be a schedule, or a user input, or a data change in a DB.

## Azure Functions

This is all code based. You have to have a developer or someone writing actual code for the function to run. When the specified event happens, it triggers the function to execute the code.

These functions are all stateless. This means that there is no persistent data. The exception for this is if you create it to be "durable". This means you're carrying some kind of data between instances.

## Azure Logic Apps

This is the simpler version of Functions. You have more of a GUI for creating these pipeline functions using connector templates supplied in Azure. PowerAutomate & PowerApps is based on this.

Again, you're only paying for the exact amount of time that the app runs, not the downtime.

# DevOps Technologies

## Azure DevOps

### Repos

This is where all the code is stored. It provides features like version control utilizing GIT.

### Boards

This if primarily for project management for new features or tasks that need to be completed. Helps move things through stages and track progress.

### Pipelines

Gives the capability of CI/CD. What that does is take code as it enters the repo and tests it to be functional, and then pushes the code out to a deployment once it passes testing.

## GitHub

GitHub is currently the industry standard for things like repos as well as GitHub actions, which are event triggered processes.
Environments in GitHub are sets of conditions that regulate the code allowed.
Projects also replicates the use of Kanban boards like "Boards" in Azure DevOps

You can actually integrate Azure DevOps into GitHub if you're already using Azure DevOps and might want to move to GitHub.

## Azure DevTest Labs

This is an environment that you can use to easily build and provision resources to test code on, and then get rid of it when you're done. This is based on ARM templates.

# Azure Management Solutions

At the end of the day, regardless of which option you choose you're still talking to ARM, it just a different way to interact with it.

### Graphical

- Portal
    - Web based, intuitive, graphical representation of your infrastructure that can give you a very quick overview of what is going on. You can also see things like monitoring and statistics.
    - The downside is it can be fairly slow and inconsistent when creating new resources.
- Mobile Application
    - IOS/Android app that can be used for basic actions and alert monitoring
    - Would not be ideal for management and creation.

### CLI/Terminal

- Azure PowerShell Module
    - Cross platform module for Linux, windows, and mac that can be used to script deployments and management tasks.
- Azure CLI
    - Another cross platform option, that is more Bash focused than PowerShell is.
- Cloud Shell in the Portal
    - This is essentially a version of PowerShell or azure cli that can be run within the portal window

# Azure Advisor

The advisor can be accessed through both the portal as well as the API for azure.

What it does is provide recommendations for things like cost, security, reliability, etc. It will analyze your environment and let you know if there are things you should be changing or optimizing.

# ARM Templates

These templates are declarative files formatted in the JSON formatting scheme. Declarative means that rather than defining exactly the steps you want to occur, you simply define the status you want to achieve, and Azure will go about making that happen in the best way it can. This means you don't need to worry about fine details or scripts failing part way through. You're simply defining a state you wish azure to be in.

You can also include these templates in your GIT repos and deploy them in a CI/CD pipeline for version control and testing.

BICEP is a partner tool for ARM templates as they are more "Human friendly" than JSON files. Once you create a bicep file, it still gets converted to a JSON in the backend.

# Azure Monitor

Everything in Azure generates some kind of data in the form of logs or something similar. For example Azure AD will record Sign-Ins in its own set of log files.

Azure Monitor collects all of the logs from the other resources in Azure and organizes them based on time.

Typically when you generate logs in Azure, you can send them to a few different places. These options are Azure Storage, Event Hub, or Log Analytics Workspace. All of these options live within Azure Monitor and are managed from that one point.

The capabilities provided are things like metric review, log analysis, or set up different "Action Rules" that can do things like send alerts via sms, email, webhooks, etc.

# Azure Service Health

All this is for is to let you know what the service health is in different regions, so that you know if Azure is experiencing some kind of outage or service interruption.

You can also set alert rules here so that you are alerted anytime there is an issue within Azure that you may want to know about.

# Defender for Cloud

Defender can do more than cloud despite the name. It can extend on-prem, as well as to other cloud environments you may be utilizing. Note that it used to be called Azure Security Center

Defender is able to also give you recommendations that are security related, and gives you a score based on the level of security you have in your environment. It will often also give you step by step instructions to remedy the issue. It will also help you track regulatory compliance so that you can meet requirements set on your infrastructure.

There is also a more premium option for defender that grants more capabilities like "Just in time VM access" or "service hardening". These are of course paid features, but they are a good idea for any business.

Defender can also alert on security issues and you can set up different actions to be triggered by alerts (azure functions, etc.)

# Azure Key Vault

Many applications need "secrets" like passwords, api tokens, etc. You typically don't want to keep these within the application code as that is insecure and can be leaked or hacked. So this is where Key Vault comes into play.

Key Vault can store:

- Secret
    - Read/Write access
- Keys
    - Generate
    - import
    - actions
- Certificates
    - Lifecycle management
    - distribution

Azure runs its key vault service on hardware HSMs that have hardware level security.

Key Vaults are controlled by access policy, but note that they are not individual object granular, unless you use RBAC to control the secrets/keys/certs that users have access to. You can set RBAC policies at a object level, where as normal access policy settings are KeyVault level policies.

### Managed Identity

This is an identity that is built into a resource in Azure that you can use to authenticate to Key Vault, since you can't store the key vault password within Key Vault as you wouldn't be able to access it.

# Microsoft Sentinel

This is a SIEM and SOAR utility within Azure.

- SIEM
    - Security Information & Event Management
    - Detects and analyzes security events
- SOAR
    - Security Orchestration Automation Response
    - Responds to security events in an automated fashion

Sentinel sits on top of a Log Analytics Workspace, as it needs to be able to view logs to identify security related events that occur. You may also be looking for signals coming from different resources. These can come from anywhere (azure, on-prem, other clouds, AD, etc.)
Sentinel uses things called Data Connectors to connect to different services that will allow it to gather data to analyze.

# Azure Dedicated Hosts

By default, Azure hosts are "multi-tenant" which is to mean that there may be many VMs from many customers running on a specific host in a datacenter.

Azure Dedicated Host is an offering within Azure to reserve a "host group" within a certain region (optionally an AZ as well) that you can then add dedicated host devices in the datacenter. You can also say you want them in different Fault Domains which will be different Racks within the datacenter. You can then build VMs on those hosts, and nobody else can utilize that Host.

## Isolated VM

There are a set of Isolated VM types or options that are so large, by default they will end up on their own host with no other VMs running on it.

When you have either of these options in your infrastructure, you are allowed to manage the maintenance windows that occur with your hosts, since you're not sharing with other tenants.

# Defense In-Depth

Typically to secure your data, you will have layers of security around that, with security features at each layer.

- Data
    - at the center, you want to make sure you have your data encrypted
- Application
    - You want your applications to be security compliant and free from major bugs or vulnerabilities
- Compute
    - This is the VM itself. You want it patched, with firewalls in place, etc.
- Network
    - You want to have a a least privilege/access overarching policy on your network, so that things don't have access to what they don't need.
    - Zero trust concepts are important here as well, so that devices and services are verified
- Perimeter
    - This is where you stop things like DDoS attacks, you may have edge firewalls, etc.
- Identity/Access
    - This is where you're authenticating to your environment, to ensure those who are accessing are who they say they are.
    - You'll also have logs and event monitoring
- Physical
    - This is just physical security to the hardware itself.

Core concepts here are things like Confidentiality, Integrity, and Availability.

# Zero Trust Concepts

Zero Trust relies on 3 principals

- Verify Explicitly
    - For every interaction, you're going to be evaluating the user and scenario to ensure it is legitimate and search for anomalies
- Least Privilege
    - You only grant access to exactly what is needed, and nothing more. This decreases the attack surface of different resources, as there are less things with access to it.
- Assume Breach
    - This is the default presumption that there is a breach and there are bad actors somewhere. This is why we constantly analyze and record logs, to watch for malicious activity.

We're going to be paying attention to Identity, Endpoints involved, Network Relationships and source/destination, and finally context. We want to keep the context of every request in mind so that we can identify the risk and control the access allowed.

# Network Security Groups

NSG's allow you to define who and how thing are allowed to access your network within Azure.

You'll be using properties like:

- rules
- name
- priority
- destination/source
- IP Address
- Port
- Protocol

You can then assign actions to different values of these properties, typically "allow or deny".

You can also use something called a "service tag" that are basically groups of IPs that are grouped within Azure, so you can allow traffic to or from different groups of known IP ranges.

# Azure Firewall

This is a smarter firewall utility within Azure that is fully managed and auto scales as needed. It fully understands layer 7 as well as layer 4. It will deploy into its own subnet, and is the only thing installed in that subnet. All of your other subnets then will use user defined routes to go through the firewall subnet first.

Because it is a layer 7 firewall, it can analyze things like FQDNs, as well as the layer 4 concepts like IPs and Ports.

With the premium offering, it can actually do TLS inspection to decrypt ssl traffic and analyze it as needed. It can also identify IPs coming in, and de-NAT the traffic to direct it directly to a resource as needed.

# Azure DDoS Protection

This is simply a service to identify a DDoS attack and block it entirely. There are different types of attacks like:

- Volumetric
- Protocol targeted
- Application attacks

Azure automatically protects against any common attack, and can intelligently identify them. You can directly link a DDoS protection plan to a vNET or multiple vNETs. It will use ML to adaptively tune itself as needed, and provide metrics and reports on activity. Keep in mind these advanced features are not free and require the "standard" plan in addition to the basic.

# Authentication & Authorization

## Authentication

- Validating Identity
    - Passwords
    - Biometric
    - tokens or hardware

## Authorization

Once we've proven who we are with Authentication, we use things like RBAC to control what you can do.

# Azure AD

This is referred to as a Cloud Identity Provider. Each organization will have its own "tenant" of Azure AD.

Note that although it is called AD, it is not the same as on-prem AD. On-prem does things like Kerberos, ntlm, ldap, etc. and uses things like OUs, Group Policies, and delegation. These don't exist in Azure AD.

# Conditional Access, MFA, SSO

Using Azure AD, we can use these tools to provide more functionality.

### Conditional Access

Here I can set conditions and policies that need to be met before access is allowed. It will block anything that does not meet the required conditions. This can be things like location, devices, MFA, risk factors, etc.

### MFA

This is just something in addition to your password that you need to use to authenticate to a service. It can be things like biometrics, tokens or TPMs, etc.

### SSO

This is what allows you to sign in once to the system as a whole, and then for a set time you don't need to re-authenticate each time you access a new resource in the environment. So long as you're using the same AD tenant, you don't need to re-auth more than once. That being said, you can set certain areas that do require a re-auth like admin consoles etc.

# RBAC

This is called Role Based Access Control. At a high level, you are creating roles, and assigning it to a user.

A role is essentially a set of actions that you're allowed to do, and can be restricted to certain scopes. Note that roles are inherited, so you can set a role at a high level and it will filter down to anything organized below that level. Role Assignment is enforced at the ARM level, so regardless of how you interact with Azure, your roles will still apply.

Some generic Roles are Owner, Contributor, and Reader. Fairly self explanatory. You can have additional roles however that are more granular and apply to specific resources or actions.

# Resource Locks

This tool can be applied at any level (subscription, RG, or Resource) and will be inherited down. The options available are "Cannot Delete" and "Read Only". These policies are applied at the ARM level, but does not apply to the data level. So you can still modify the data within the resource, but you are locking the resource itself.

To apply a Resource Lock, you need to be an owner of the scope that the resource resides in. Administrators can modify the properties of that lock.

# Tags

A tag is just metadata applied to a resource in a key:value pair. this can be applied to any level (sub, rg, resource), but is not inherited unless you specify it to be when you create a sub object.

You can enforce policies via Azure Policy that refers to the tag. This is a good way to associate resources with a policy upon resource creation.

You can also use it to search and filter resources when you're trying to accomplish other tasks.

# Azure Policy

Azure Policy is what specifies guardrails during resource creation and provisioning, so that people are not just creating vast amounts of resources or doing things with existing resources that they shouldn't be doing.
These policies can be applied at any level and are inherited.

You typically want to create an "Initiative" that has a series of polices, and you apply that initiative to a certain scope.

You have many optional "Effects" for policies

- Audit
- Deny
- Append
- Modify
- If-not-exists

You can use these policies to manage resources as well as you can see, so it can append tags for example to resources within its scope. You can also set limits as to what can be created, like different SKUs of resources. This prevents the over provisioning of resources, and can help control costs.

You can also find Initiatives that are pre-built for different compliance profiles like HIPPA so that you can ensure your environment is easily compliant. You'll notice that some of these initiatives have over 900 policies, which is why you have this level of grouping.

# Azure Blueprints

A blueprint can be a grouping of lots of other tools like RGs, ARM Templates, RBAC, and policies. You can then assign that blueprint to a subscription to create the environment as defined. This can be thought of similarly to a very high level IaaC utility.

# Privacy Statement, OST, & DPA

### Privacy Statement

This document is intended to document what data Microsoft processes and collects, and what it uses it for, and how it does it.

### OST

The OnlineServicesTerms outlines the legal relationship and agreements between Microsoft and the customer

### DPA

Data Protection Addendum defines the security terms and policies that Microsoft uses and agrees to.

# Trust Center & Compliance Documentation

The trust center is broken into 3 different sections, Security, Privacy, and Compliance. These sections detail how Microsoft is addressing these 3 umbrellas.

Trust Center is the Hub where all of this information lives, and it all connects down and contains the Compliance Documentation

The compliance documentation details out all of the different offerings that Microsoft maintains and can assist you in meeting whichever compliance regulations that you need.

# Sovereign Regions

These are the different environments within Azure that exist out there. These are the public, USGovernment, China, and Germany.

These exist due to certain regulations and requirements that are not met by the public environment that the general customer uses.

Azure China is actually run by 21vianet because China does not allow another nationality based company to run within their borders. Microsoft licenses the Azure technology to 21vianet to run in their datacenters.

# Cost Factors

Resource cost are defined in a few different factors:

- Type of resource
- Resource SKU (sizes, etc.)
- Tiers (storage tiers like cool, hot)
- Location (region and replication)

There are meters for each resource that help calculate the cost of the item as well:

- Does it exist
- is it running
- Instances
- Work being done (serverless)
- Storage capacity (type specific)
    - Amount used
    - Amount Provisioned
- Interactions
- Licensing

## Cost Reduction

You can reduce cost with things like:

- AutoScaling (vms, pods, etc.)
- use serverless rather than VMs
- Choosing lower SKUs
- Deallocate unused resources
- Delete resources that are not required
- Hot vs Cool vs Archival Storage Tiers
- Manage resource ownership with Tags
    - Identify and track owners and users
- Azure Advisor
    - Analyze recommendations to reduce costs
- Azure Reservations to lock in resources for a period of time
    - discounts can apply based on term
- Migrate on-prem licensing into azure
    - benefit of a hybrid infrastructure
- Spot VMs
    - Uses Azure "spare capacity"
    - agree to a price ahead of time
    - work is stopped if capacity is needed or cost cap is met
        - can be evicted